{"chunk":27,"numChunks":37,"fileHash":"p+NTwC3zq/FPOmXxcPSDB6QbnKDyg9Iv5YKb19s7AmA=","filePath":"src/services/financial_analysis.js","content":"/**\nFinancialPlanner.FinancialAnalysisService = (function(utils, uiService, errorService, config) {\n  class FinancialAnalysisService {\n    addKeyMetricsSection(startRow) {\n      const pairedMetrics = [\n        {\n          cashFlow: {\n            name: 'Allocatable Income',\n            avgFormula: `=IFERROR(${totals.income.averageRef}+${totals.essentials.averageRef}+${totals.wantsPleasure.averageRef}-${totals.savings.averageRef}, \"N/A\")`,\n            totalFormula: `=IFERROR(${totals.income.totalRef}+${totals.essentials.totalRef}+${totals.wantsPleasure.totalRef}-${totals.savings.totalRef}, \"N/A\")`,\n            sparklinePlaceholderText: `[Trend: Allocatable Income]`,\n            valueType: 'currency',\n            description: \"Funds for 'Extra' spending or more savings, after core costs & planned savings.\"\n          },\n          rate: {\n            name: 'Extra Spending Rate',\n            avgFormula: `=IFERROR(ABS(${totals.extra.averageRef})/${totals.income.averageRef},0)`,\n            targetValue: serviceInstance.config.TARGET_RATES.EXTRA !== undefined ? serviceInstance.config.TARGET_RATES.EXTRA : 'N/A',\n            sparklinePlaceholderText: `[Trend: Extra Rate]`,\n            valueType: 'percentage',\n            avgLabel: 'Avg Rate',\n            description: \"Percentage of gross income spent on non-categorized extra items.\"\n          }\n        },"}