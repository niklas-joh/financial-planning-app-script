{"chunk":25,"numChunks":37,"fileHash":"p+NTwC3zq/FPOmXxcPSDB6QbnKDyg9Iv5YKb19s7AmA=","filePath":"src/services/financial_analysis.js","content":"/**\nFinancialPlanner.FinancialAnalysisService = (function(utils, uiService, errorService, config) {\n  class FinancialAnalysisService {\n    addKeyMetricsSection(startRow) {\n      const pairedMetrics = [\n        {\n          cashFlow: {\n            name: 'Income after Essentials',\n            avgFormula: `=IFERROR(${totals.income.averageRef}+${totals.essentials.averageRef}, \"N/A\")`,\n            totalFormula: `=IFERROR(${totals.income.totalRef}+${totals.essentials.totalRef}, \"N/A\")`,\n            sparklinePlaceholderText: `[Trend: NI after Essentials]`,\n            valueType: 'currency',\n            description: \"Income remaining after covering essential living costs.\"\n          },\n          rate: {\n            name: 'Essentials Spending Rate',\n            avgFormula: `=IFERROR(ABS(${totals.essentials.averageRef})/${totals.income.averageRef},0)`,\n            targetValue: serviceInstance.config.TARGET_RATES.ESSENTIALS !== undefined ? serviceInstance.config.TARGET_RATES.ESSENTIALS : 'N/A',\n            sparklinePlaceholderText: `[Trend: Essentials Rate]`,\n            valueType: 'percentage',\n            avgLabel: 'Avg Rate',\n            description: \"Percentage of gross income spent on essential needs.\"\n          }\n        },"}