{"chunk":26,"numChunks":37,"fileHash":"p+NTwC3zq/FPOmXxcPSDB6QbnKDyg9Iv5YKb19s7AmA=","filePath":"src/services/financial_analysis.js","content":"/**\nFinancialPlanner.FinancialAnalysisService = (function(utils, uiService, errorService, config) {\n  class FinancialAnalysisService {\n    addKeyMetricsSection(startRow) {\n      const pairedMetrics = [\n        {\n          cashFlow: {\n            name: 'Income after Core Spending',\n            avgFormula: `=IFERROR(${totals.income.averageRef}+${totals.essentials.averageRef}+${totals.wantsPleasure.averageRef}, \"N/A\")`,\n            totalFormula: `=IFERROR(${totals.income.totalRef}+${totals.essentials.totalRef}+${totals.wantsPleasure.totalRef}, \"N/A\")`,\n            sparklinePlaceholderText: `[Trend: NI after Core Spend]`,\n            valueType: 'currency',\n            description: \"Income after essential and regular discretionary (wants/pleasure) costs.\"\n          },\n          rate: {\n            name: 'Wants/Pleasure Spending Rate',\n            avgFormula: `=IFERROR(ABS(${totals.wantsPleasure.averageRef})/${totals.income.averageRef},0)`,\n            targetValue: serviceInstance.config.TARGET_RATES.WANTS_PLEASURE !== undefined ? serviceInstance.config.TARGET_RATES.WANTS_PLEASURE : 'N/A',\n            sparklinePlaceholderText: `[Trend: Wants Rate]`,\n            valueType: 'percentage',\n            avgLabel: 'Avg Rate',\n            description: \"Percentage of gross income spent on wants and pleasure.\"\n          }\n        },"}